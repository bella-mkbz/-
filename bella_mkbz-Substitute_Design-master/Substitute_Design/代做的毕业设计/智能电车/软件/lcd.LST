C51 COMPILER V9.60.0.0   LCD                                                               02/14/2020 22:21:01 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN lcd.OBJ
COMPILER INVOKED BY: D:\software install\Keil_C51\C51\BIN\C51.EXE lcd.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS
                    -(2)

line level    source

   1          #include "lcd.h"
   2          
   3          
   4            
   5          /*******************************************************************************
   6          * º¯ Êý Ãû         : Lcd1602_Delay1ms
   7          * º¯Êý¹¦ÄÜ       : ÑÓÊ±º¯Êý£¬ÑÓÊ±1ms
   8          * Êä    Èë         : c
   9          * Êä    ³ö         : ÎÞ
  10          * Ëµ    Ãû         : ¸Ãº¯ÊýÊÇÔÚ12MHZ¾§ÕñÏÂ£¬12·ÖÆµµ¥Æ¬»úµÄÑÓÊ±¡£
  11          *******************************************************************************/
  12          
  13          void Lcd1602_Delay1ms(uint c)   //Îó²î 0us
  14          {
  15   1          uchar a,b;
  16   1        for (; c>0; c--)
  17   1        {
  18   2           for (b=199;b>0;b--)
  19   2           {
  20   3              for(a=1;a>0;a--);
  21   3           }      
  22   2        }
  23   1            
  24   1      }
  25          
  26          /*******************************************************************************
  27          * º¯ Êý Ãû         : LcdWriteCom
  28          * º¯Êý¹¦ÄÜ       : ÏòLCDÐ´ÈëÒ»¸ö×Ö½ÚµÄÃüÁî
  29          * Êä    Èë         : com
  30          * Êä    ³ö         : ÎÞ
  31          *******************************************************************************/
  32          void LcdWriteCom(uchar com)   //Ð´ÈëÃüÁî
  33          {
  34   1        LCD1602_E = 0;     //Ê¹ÄÜ
  35   1        LCD1602_RS = 0;    //Ñ¡Ôñ·¢ËÍÃüÁî
  36   1        LCD1602_RW = 0;    //Ñ¡ÔñÐ´Èë
  37   1        
  38   1        LCD1602_DATAPINS = com;     //·ÅÈëÃüÁî
  39   1        Lcd1602_Delay1ms(1);    //µÈ´ýÊý¾ÝÎÈ¶¨
  40   1      
  41   1        LCD1602_E = 1;            //Ð´ÈëÊ±Ðò
  42   1        Lcd1602_Delay1ms(5);    //±£³ÖÊ±¼ä
  43   1        LCD1602_E = 0;
  44   1      }
  45          /*******************************************************************************
  46          * º¯ Êý Ãû         : LcdWriteData
  47          * º¯Êý¹¦ÄÜ       : ÏòLCDÐ´ÈëÒ»¸ö×Ö½ÚµÄÊý¾Ý
  48          * Êä    Èë         : dat
  49          * Êä    ³ö         : ÎÞ
  50          *******************************************************************************/       
  51             
  52          void LcdWriteData(uchar dat)      //Ð´ÈëÊý¾Ý
  53          {
  54   1        LCD1602_E = 0;  //Ê¹ÄÜÇåÁã
C51 COMPILER V9.60.0.0   LCD                                                               02/14/2020 22:21:01 PAGE 2   

  55   1        LCD1602_RS = 1; //Ñ¡ÔñÊäÈëÊý¾Ý
  56   1        LCD1602_RW = 0; //Ñ¡ÔñÐ´Èë
  57   1      
  58   1        LCD1602_DATAPINS = dat; //Ð´ÈëÊý¾Ý
  59   1        Lcd1602_Delay1ms(1);
  60   1      
  61   1        LCD1602_E = 1;   //Ð´ÈëÊ±Ðò
  62   1        Lcd1602_Delay1ms(5);   //±£³ÖÊ±¼ä
  63   1        LCD1602_E = 0;
  64   1      }
  65          
  66          /*******************************************************************************
  67          * º¯ Êý Ãû       : LcdInit()
  68          * º¯Êý¹¦ÄÜ     : ³õÊ¼»¯LCDÆÁ
  69          * Êä    Èë       : ÎÞ
  70          * Êä    ³ö       : ÎÞ
  71          *******************************************************************************/       
  72          void LcdInit()              //LCD³õÊ¼»¯×Ó³ÌÐò
  73          {
  74   1        LcdWriteCom(0x38);  //¿ªÏÔÊ¾
  75   1        LcdWriteCom(0x0c);  //¿ªÏÔÊ¾²»ÏÔÊ¾¹â±ê
  76   1        LcdWriteCom(0x06);  //Ð´Ò»¸öÖ¸Õë¼Ó1
  77   1        LcdWriteCom(0x01);  //ÇåÆÁ
  78   1        LcdWriteCom(0x80);  //ÉèÖÃÊý¾ÝÖ¸ÕëÆðµã
  79   1      }
  80          /*******************************************************************************
  81          * º¯ Êý Ãû       : Show_String(uchar addr,uchar *str)
  82          * º¯Êý¹¦ÄÜ       : ÏÔÊ¾×Ö·û´®
  83          * Êä    Èë       : ×Ö·û´®
  84          * Êä    ³ö       : ÎÞ
  85          *******************************************************************************/
  86          void Show_String(uchar addr,uchar *str)
  87          {
  88   1         LcdWriteCom(addr);
  89   1         while(*str != '\0')
  90   1         {
  91   2           LcdWriteData(*str);  
  92   2           str++;
  93   2         }
  94   1      }
  95          /*******************************************************************************
  96          * å‡½ æ•° å       : Show_Dec_Number(uchar addr,uint temp)
  97          * å‡½æ•°åŠŸèƒ½       : æ˜¾ç¤ºä¸€ä¸ªåè¿›åˆ¶çš„æ•°æ®
  98          * è¾“    å…¥       : åè¿›åˆ¶æ•°æ®
  99          * è¾“    å‡º       : æ— 
 100          *******************************************************************************/
 101          void Show_Dec_Number(uchar addr,uint temp)
 102          {
 103   1         LcdWriteCom(addr);
 104   1         if(temp >= 1000)
 105   1         {
 106   2            LcdWriteData(temp/1000+0x30);
 107   2            LcdWriteData(temp%1000/100+0x30);
 108   2            LcdWriteData(temp%100/10+0x30);
 109   2            LcdWriteData(temp%10+0x30);
 110   2         }
 111   1         else if((temp >= 100) && (temp < 1000))
 112   1         {
 113   2            LcdWriteData(temp/100+0x30);
 114   2            LcdWriteData(temp%100/10+0x30);
 115   2            LcdWriteData(temp%10+0x30);
 116   2            LcdWriteData(" ");
C51 COMPILER V9.60.0.0   LCD                                                               02/14/2020 22:21:01 PAGE 3   

*** WARNING C214 IN LINE 116 OF lcd.c: 'Argument': conversion: pointer to non-pointer
 117   2         }
 118   1         else if((temp >= 10) && (temp < 100))
 119   1         {
 120   2            LcdWriteData(temp/10+0x30);
 121   2            LcdWriteData(temp%10+0x30);
 122   2            LcdWriteData(" ");
*** WARNING C214 IN LINE 122 OF lcd.c: 'Argument': conversion: pointer to non-pointer
 123   2            LcdWriteData(" ");
*** WARNING C214 IN LINE 123 OF lcd.c: 'Argument': conversion: pointer to non-pointer
 124   2         }
 125   1         else
 126   1         {
 127   2            LcdWriteData(temp+0x30);
 128   2            LcdWriteData(" ");
*** WARNING C214 IN LINE 128 OF lcd.c: 'Argument': conversion: pointer to non-pointer
 129   2            LcdWriteData(" ");
*** WARNING C214 IN LINE 129 OF lcd.c: 'Argument': conversion: pointer to non-pointer
 130   2            LcdWriteData(" ");
*** WARNING C214 IN LINE 130 OF lcd.c: 'Argument': conversion: pointer to non-pointer
 131   2         }
 132   1         
 133   1      }
 134          
 135          
 136          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    377    ----
   CONSTANT SIZE    =      2    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  6 WARNING(S),  0 ERROR(S)
